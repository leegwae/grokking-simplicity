# 함수형 사고란 무엇인가?

## 함수형 프로그래밍; 부수 효과와 순수 함수

일반적으로 함수형 프로그래밍(FP; functional programming)은 부수 효과를 줄이고 순수 함수를 사용하는 것이라고 한다.

- 부수 효과(side effect)는 함수가 결괏값을 반환하는 것 외에 하는 모든 행동을 말한다.
- 순수 함수(pure function)은 결괏값이 인자에만 의존하며 부수 효과가 없는 함수이다. 즉, 항상 동일한 인자에 대하여 동일한 결괏값을 반환한다.

하지만 부수 효과는 소프트웨어를 실행하는 이유이다. 어떤 함수가 메일을 보내는 기능을 한다면, 이 기능은 결괏값을 반환하는 것 외의 행동이므로 부수 효과이다. 다른 정의로 살펴봐야한다.

## 함수형 사고; 액션, 계산, 데이터

함수형 사고(functional thinking)은 함수형 프로그래밍의 기술과 개념이다. 함수형 프로그래머는 코드를 세 부분; 액션, 계산, 데이터로 나눈다.

1. 액션(action): 실행 시점과 횟수에 의존한다. 첫번째 호출과 두번째 호출은 다르다. 어제의 호출과 오늘의 호출은 다르다.
2. 계산(calculation): 입력값을 출력값으로 만드는 것이다. 언제나 동일한 입력에 대해서는 동일한 출력을 낸다.
3. 데이터(data): 이벤트에 대해 기록한 사실이다. 정적이며 해석이 필요하다.

```javascript
{ firstName: "Luxanna", lastName: "Crownguard" };	// 데이터
sum([1, 2, 3, 4, 5]);	// 계산
sendEmail(to, from, subject, body);	// 액션
```

- **호출하는 시점에 따라 값이 달라지는 코드인가?** 액션은 호출하는 시점에 따라, 호출 횟수에 따라 값이 달라질 수 있다. 데이터와 계산은 그렇지 않다.
- **실행가능한 코드인가?** 계산은 실행가능하다. 데이터는 그렇지 않다.

### 이 구분은 어떠한 장점이 있는가?

네트워크 상에서 여러 호스트가 통신하는 분산 시스템에 장점이 있다. 호출 시점과 횟수에 의존하는 액션을 줄일수록, 불확실한 분산 네트워크 환경에서의 여러 문제를 해결할 수 있다.

## 함수형 개념들

### 액션, 계산, 데이터의 분류와 계층형 설계

- 계층형 설계(stratified design)는 코드를 계층적으로 구성하는 아키텍처 패턴이다. 계층이 아래로 갈수록 자주 바뀌지 않는(의존성이 많아 바꾸기 어려운) 코드이고, 위로 갈수록 자주 바뀌는(의존성이 거의 없어 쉽게 바꿀 수 있는) 코드이다.
- 대개 (낮은 계층부터) 비지니스 규칙, 도메인 규칙, 기술 스택 계층 순으로 분리한다.
- 이렇게 계층적으로 구성하면 테스트, 재사용, 유지보수가 쉽다.
- (TODO) 8장, 9장

### 타임라인 다이어그램과 일급 추상

- 타임라인 다이어그램(timeline diagram)은 액션을 시간 순서에 따라 나열한 것이다.
- 분산 시스템에서 타임라인을 서로 맞추지 않으면, 서로 다른 타임라인에 있는 액션들은 예측 불가능한 순서대로 실행된다.
- 타임라인 커팅(cutting)은 여러 타임라인이 동시에 진행될 때 서로 순서를 맞추는 방법이다. 타임라인 커팅은 고차 동작(high-order operation; 고차 함수로 만든 동작)으로 구현한다.
- (TODO) 15장~17장



## 참고

- 쏙쏙 들어오는 함수형 코딩 CHAPTER 1. 쏙쏙 들어오는 함수형 코딩에 오신 것을 환영합니다
- 쏙쏙 들어오는 함수형 코딩 CHAPTER 2. 현실에서의 함수형 사고